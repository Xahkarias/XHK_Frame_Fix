@base_cost = 300
@city_cost = 500
@advanced_cost = 1000
@advanced_rare_cost = 50
@advanced_double_cost = 2000
@advanced_double_rare_cost = 100
@mega_cost = 2000
@mega_alloy_cost = 500
@mega_rare_cost = 250

@base_upkeep = 1
@city_upkeep = 2
@advanced_upkeep = 5
@advanced_rare_upkeep = 1
@advanced_double_upkeep = 10
@advanced_double_rare_upkeep = 2
@mega_upkeep = 20
@mega_alloy_upkeep = 5
@mega_rare_upkeep = 5

@base_time = 240
@city_time = 480
@advanced_time = 720
@mega_time = 960

@half_district_jobs = 100


###############################################################################################################
###############################################################################################################
#          HABITATION
###############################################################################################################
###############################################################################################################

district_giga_frameworld_city = {
	base_buildtime = @city_time
	icon = district_city
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}

	show_on_uncolonized = {
		exists = from
		from = { is_gestalt = no }
		OR = {
			uses_district_set = giga_frameworld
		}
		not = { has_planet_flag = frameworld_advanced_city }
	}
	
	potential = {
		exists = owner
		owner = { is_gestalt = no }
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_city }
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_nexus
		district_giga_frameworld_hive
		
		district_giga_frameworld_city_advanced
		district_giga_frameworld_nexus_advanced
		district_giga_frameworld_hive_advanced
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 1000
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = -200
		}
	}

	# inline_script = {
	# 	script = planet/maintenance/giga_clerk_job_swap
	# 	jobs = 1
	# 	district = @yes
	# }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_tankbound_empire = yes
            }
        }
        modifier = {
            job_production_overseer_add = 100
        }
    }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_public_works }
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_housing_1
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_housing_2
				NOT = { has_valid_civic = civic_agrarian_idyll }
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_city_name
	}
}

###############################################################################################################

district_giga_frameworld_city_advanced = {
	base_buildtime = @city_time
	icon = district_city
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}
	
	show_on_uncolonized = {
		exists = from
		from = { is_gestalt = no }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}
	
	potential = {
		exists = owner
		owner = { is_gestalt = no }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_nexus
		district_giga_frameworld_hive
		
		district_giga_frameworld_city
		district_giga_frameworld_nexus_advanced
		district_giga_frameworld_hive_advanced
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @advanced_cost
		}
		upkeep = {
			energy = @advanced_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = { always = yes }
		planet_housing_add = 2000
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = -400
		}
	}

	# inline_script = {
	# 	script = planet/maintenance/giga_clerk_job_swap
	# 	jobs = 2
	# 	district = @yes
	# }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_tankbound_empire = yes
            }
        }
        modifier = {
            job_production_overseer_add = 100
        }
    }
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_public_works }
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_housing_1
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_housing_2
				NOT = { has_valid_civic = civic_agrarian_idyll }
			}
		}
		modifier = {
			planet_housing_add = 400
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_city_name
	}
}

###############################################################################################################

district_giga_frameworld_hive = {
	base_buildtime = @city_time
	icon = district_hive
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}
	
	show_on_uncolonized = {
		from = { is_hive_empire = yes }
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_city }
	}
	
	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_city }
	}
	
	conversion_ratio = 0.5
	convert_to = {
		district_giga_frameworld_nexus
		district_giga_frameworld_city
		
		district_giga_frameworld_city_advanced
		district_giga_frameworld_nexus_advanced
		district_giga_frameworld_hive_advanced
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 1200
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_1 }
		}
		modifier = {
			planet_housing_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_2 }
		}
		modifier = {
			planet_housing_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_extended_hives }
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_hive_name
	}
}

###############################################################################################################

district_giga_frameworld_hive_advanced = {
	base_buildtime = @advanced_time
	icon = district_hive
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}
	
	show_on_uncolonized = {
		from = { is_hive_empire = yes }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}
	
	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_nexus
		district_giga_frameworld_city
		
		district_giga_frameworld_city_advanced
		district_giga_frameworld_nexus_advanced
		district_giga_frameworld_hive
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @advanced_cost
		}
		upkeep = {
			energy = @advanced_upkeep
		}
	}

	triggered_planet_modifier = {
		potential = { always = yes }
		planet_housing_add = 2400
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_1 }
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_2 }
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_extended_hives }
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_hive_name
	}
}

###############################################################################################################

district_giga_frameworld_nexus = {
	base_buildtime = @city_time
	icon = district_nexus
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}
	
	show_on_uncolonized = {
		from = { is_machine_empire = yes }
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_city }
	}
	
	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_city }
	}

	allow = {
		#hidden_trigger = {
			exists = owner
			or = {
				owner = {
					is_ai = no
				}

				# we need more housing
				free_housing < 10

				# we might still need to unlock buildings
				num_districts = {
					type = district_giga_frameworld_nexus
					value < 10
				}

				# if we need more maintenance drones
				frameworld_needs_more_maintenance_drones = yes
			}
		#}
	}
	
	conversion_ratio = 0.5
	convert_to = {
		district_giga_frameworld_city
		district_giga_frameworld_hive
		
		district_giga_frameworld_city_advanced
		district_giga_frameworld_nexus_advanced
		district_giga_frameworld_hive_advanced
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 1000
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_1 }
		}
		modifier = {
			planet_housing_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_2 }
		}
		modifier = {
			planet_housing_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_optimized_nexus }
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_machine_name
	}
}

###############################################################################################################

district_giga_frameworld_nexus_advanced = {
	base_buildtime = @advanced_time
	icon = district_nexus
	is_capped_by_modifier = no
	
	overlay_icon = GFX_district_government
	exempt_from_ai_planet_specialization = yes
	has_primary_zone = yes
	
	zone_slots = {
		slot_city_government
		slot_frame_government0
		slot_frame_government1
	}
	
	show_on_uncolonized = {
		from = { is_machine_empire = yes }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}
	
	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_city
	}

	allow = {
		#hidden_trigger = {
			exists = owner
			or = {
				owner = {
					is_ai = no
				}

				# we need more housing
				free_housing < 10

				# we might still need to unlock buildings
				num_districts = {
					type = district_giga_frameworld_nexus_advanced
					value < 5
				}

				# if we need more maintenance drones
				frameworld_needs_more_maintenance_drones = yes
			}
		#}
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_city
		district_giga_frameworld_hive
		
		district_giga_frameworld_city_advanced
		district_giga_frameworld_nexus
		district_giga_frameworld_hive_advanced
	}
	
	resources = {
		category = planet_districts_cities
		cost = {
			minerals = @advanced_cost
		}
		upkeep = {
			energy = @advanced_upkeep
		}
	}

	triggered_planet_modifier = {
		potential = { always = yes }
		planet_housing_add = 2000
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_1 }
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_2 }
		}
		modifier = {
			planet_housing_add = 200
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_optimized_nexus }
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_machine_name
	}
}

###############################################################################################################
###############################################################################################################
#          INDUSTRY
###############################################################################################################
###############################################################################################################

district_giga_frameworld_foundry = {
	base_buildtime = @city_time
	icon = district_arcology_arms_industry
	is_capped_by_modifier = no
	overlay_icon = GFX_district_alloys
	
	zone_slots = {
		slot_giga_frameworld_foundry
	}

	prerequisites = {
		tech_basic_industry
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	show_on_uncolonized = {
		exists = from
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_industrial }
	}
	
	potential = {
		exists = owner
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_industrial }
	}
	
	conversion_ratio = 0.5
	convert_to = {
		district_giga_frameworld_foundry_advanced
	}
	
	resources = {
		category = planet_districts_industrial
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}

		# nanite upgrade
		upkeep = {
			trigger = {
				frameworld_has_active_nanite_upgrade = yes
			}
			energy = 10
			nanites = 1
		}
		produces = {
			trigger = {
				frameworld_has_active_nanite_upgrade = yes
			}
			alloys = 5
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	inline_script = {
		script = jobs/foundry_add
		AMOUNT = @half_district_jobs
	}
	
	ai_resource_production = {
		alloys = 2
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_industrial = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_foundry_name
	}
}

###############################################################################################################

district_giga_frameworld_foundry_advanced = {
	base_buildtime = @advanced_time
	icon = district_arcology_arms_industry
	is_capped_by_modifier = no
	overlay_icon = GFX_district_alloys
	
	zone_slots = {
		slot_giga_frameworld_foundry
	}

	show_on_uncolonized = {
		exists = from
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_industrial
	}
	
	potential = {
		exists = owner
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_industrial
	}
	
	conversion_ratio = 2
	convert_to = {
		district_giga_frameworld_foundry
	}
	
	resources = {
		category = planet_districts_industrial
		cost = {
			minerals = @advanced_cost
		}
		upkeep = {
			energy = @advanced_upkeep
		}

		# nanite upgrade
		upkeep = {
			trigger = {
				frameworld_has_active_nanite_upgrade = yes
			}
			energy = 20
			nanites = 2
		}
		produces = {
			trigger = {
				frameworld_has_active_nanite_upgrade = yes
			}
			alloys = 10
		}
	}
	
	planet_modifier = {
		planet_housing_add = 600
	}
	
	inline_script = {
		script = jobs/foundry_add
		AMOUNT = @[3 * half_district_jobs]
	}
	
	ai_resource_production = {
		alloys = 4
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_industrial = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_adv_foundry_name
	}
}

###############################################################################################################

district_giga_frameworld_factory = {
	base_buildtime = @city_time
	icon = district_arcology_civilian_industry
	is_capped_by_modifier = no
	overlay_icon = GFX_district_consumer_goods

	zone_slots = {
		slot_giga_frameworld_factory
	}

	prerequisites = {
		tech_basic_industry
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}

	show_on_uncolonized = {
		exists = from
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_industrial }
		from = {
			or = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_obsessional_directive
				country_uses_consumer_goods = yes
			}
		}
	}

	potential = {
		exists = owner
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_advanced_industrial }
		owner = {
			or = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
				has_valid_civic = civic_machine_obsessional_directive
				country_uses_consumer_goods = yes
			}
		}
	}

	conversion_ratio = 0.5
	convert_to = {
		district_giga_frameworld_factory_advanced
	}

	resources = {
		category = planet_districts_industrial
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}

	planet_modifier = {
		planet_housing_add = 500
	}

	inline_script = {
		script = jobs/factory_add
		AMOUNT = @half_district_jobs
	}

	ai_resource_production = {
		consumer_goods = 5
		trigger = {
			always = yes
		}
	}

	#ai_resource_production = {
	#	ai_unobtainium = 1000
	#	trigger = {
	#		frameworld_want_industrial = yes
	#	}
	#}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_factory_name
	}
}

###############################################################################################################

district_giga_frameworld_factory_advanced = {
	base_buildtime = @advanced_time
	icon = district_arcology_civilian_industry
	is_capped_by_modifier = no
	overlay_icon = GFX_district_consumer_goods

	zone_slots = {
		slot_giga_frameworld_factory
	}

	show_on_uncolonized = {
		exists = from
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_industrial
		from = {
			or = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
				country_uses_consumer_goods = yes
			}
		}
	}

	potential = {
		exists = owner
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_advanced_industrial
		owner = {
			or = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
				country_uses_consumer_goods = yes
			}
		}
	}

	conversion_ratio = 2
	convert_to = {
		district_giga_frameworld_foundry
	}

	resources = {
		category = planet_districts_industrial
		cost = {
			minerals = @advanced_cost
		}
		upkeep = {
			energy = @advanced_upkeep
		}
	}

	planet_modifier = {
		planet_housing_add = 300
	}

	inline_script = {
		script = jobs/factory_add
		AMOUNT = @[3 * half_district_jobs]
	}

	ai_resource_production = {
		consumer_goods = 10
		trigger = {
			always = yes
		}
	}

	#ai_resource_production = {
	#	ai_unobtainium = 1000
	#	trigger = {
	#		frameworld_want_industrial = yes
	#	}
	#}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_adv_factory_name
	}
}

###############################################################################################################
###############################################################################################################
#          TRADE
###############################################################################################################
###############################################################################################################

district_giga_frameworld_trade = {
	base_buildtime = @city_time
	icon = district_hab_commercial
	is_capped_by_modifier = no
	overlay_icon = GFX_district_trade
	district_background = district_arcology_trade
	gridbox = district_arcology_trade

	zone_slots = {
		slot_giga_frameworld_trade
	}

	show_on_uncolonized = {
		exists = from
		# from = {
		# 	#is_gestalt = no
		# 	has_technology = "tech_interstellar_economics"
		# }
		uses_district_set = giga_frameworld
	}

	potential = {
		exists = owner
		# owner = {
		# 	#is_gestalt = no
		# 	has_technology = "tech_interstellar_economics"
		# }
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	tech_interstellar_economics
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	#is_gestalt = no
	# }

	# conversion_ratio = 1
	# convert_to = {
	# 	district_giga_frameworld_generator
	# }



	resources = {
		category = planet_districts_hab_trade
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}

	planet_modifier = {
		planet_housing_add = 500
	}

	inline_script = {
		script = jobs/trader_add
		AMOUNT = @half_district_jobs
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = { is_gestalt = no }
        }
        job_trader_add = 200
    }
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = { is_gestalt = yes }
        }
        job_logistics_drone_add = 200
    }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_mercantile_commercial_enterprise
			}
		}
		modifier = {
			job_trader_add = 100
		}
	}

	ai_resource_production = {
		energy = 6
		trigger = {
			OR = {
				num_unemployed >= 10
				num_assigned_jobs = {
					job = servant
					value >= 10
				}
			}
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_trade_name
	}
}

###############################################################################################################
###############################################################################################################
#          RAW MATERIALS
###############################################################################################################
###############################################################################################################

district_giga_frameworld_generator = {
	base_buildtime = @base_time
	icon = district_hab_energy
	is_capped_by_modifier = no
	overlay_icon = GFX_district_energy
	#gridbox = district_generator
	
	zone_slots = {
		slot_energy
	}

	show_on_uncolonized = {
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_penrose }
	}
	
	potential = {
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_penrose }
	}

	prerequisites = {
		tech_power_plant_1
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	conversion_ratio = 0.25
	convert_to = {
		district_giga_frameworld_penrose
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @base_cost
		}
		upkeep = {
			energy = @base_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 200
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}
	
	inline_script = {
		script = jobs/technicians_add
		AMOUNT = @base_rural_district_jobs
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_tankbound_empire = yes }
        }
        modifier = {
            job_technician_automated_workforce_mult = 1.0
            job_production_overseer_add = 100
        }
    }

	inline_script = {
		script = districts/district_triggered_name_generator
	}

	inline_script = {
		script = districts/district_triggered_flavor_desc_generator
	}
	
	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################

district_giga_frameworld_penrose = {
	base_buildtime = @mega_time
	#icon = district_hab_energy
	is_capped_by_modifier = no
	overlay_icon = GFX_district_energy
	#gridbox = district_generator
	#district_background = district_giga_frame_penrose_bg
	
	zone_slots = {
		slot_energy
	}

	show_on_uncolonized = {
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_penrose
	}
	
	potential = {
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_penrose
	}
	
	conversion_ratio = 4
	convert_to = {
		district_giga_frameworld_generator
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @mega_cost
			alloys = @mega_alloy_cost
		}
		upkeep = {
			energy = @mega_upkeep
			alloys = @mega_alloy_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 400
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = jobs/technicians_add
		AMOUNT = @[4 * base_rural_district_jobs]
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_tankbound_empire = yes }
        }
        modifier = {
            job_technician_automated_workforce_mult = 1.0
            job_production_overseer_add = 200
        }
    }
	
	ai_resource_production = {
		energy = 100
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_penrose_district = yes
		}
	}

	# NO SUBTITLES, DISTRICT NAME IS LONG
}

###############################################################################################################

district_giga_frameworld_mining = {
	base_buildtime = @base_time
	icon = district_hab_mining
    is_uncapped = {
        always = no
    }
	overlay_icon = GFX_district_minerals

	zone_slots = {
		slot_minerals
	}

	show_on_uncolonized = {
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_decompressor }
	}
	
	potential = {
		uses_district_set = giga_frameworld
		not = { has_planet_flag = frameworld_decompressor }
	}

	prerequisites = {
		tech_mechanized_mining
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	conversion_ratio = 0.25
	convert_to = {
		district_giga_frameworld_decompressor
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @base_cost
		}
		upkeep = {
			energy = @base_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 200
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = jobs/miners_add
		AMOUNT = @base_rural_district_jobs
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_tankbound_empire = yes }
        }
        modifier = {
            job_miner_automated_workforce_mult = 1.0
            job_production_overseer_add = 100
        }
    }

	inline_script = {
		script = districts/district_triggered_name_mining
	}

	inline_script = {
		script = districts/district_triggered_flavor_desc_mining
	}
	
	ai_resource_production = {
		minerals = 1
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################

district_giga_frameworld_decompressor = {
	base_buildtime = @mega_time
	#icon = district_hab_mining
	is_capped_by_modifier = no
	overlay_icon = GFX_district_minerals
	gridbox = district_mining
	#district_background = district_giga_frame_decompressor_bg
	
	zone_slots = {
		slot_minerals
	}

	show_on_uncolonized = {
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_decompressor
	}
	
	potential = {
		uses_district_set = giga_frameworld
		has_planet_flag = frameworld_decompressor
	}
	
	conversion_ratio = 4
	convert_to = {
		district_giga_frameworld_mining
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @mega_cost
			alloys = @mega_alloy_cost
		}
		upkeep = {
			energy = @mega_upkeep
			alloys = @mega_alloy_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 400
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = jobs/miners_add
		AMOUNT = @[4 * base_rural_district_jobs]
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_tankbound_empire = yes }
        }
        modifier = {
            job_miner_automated_workforce_mult = 1.0
            job_production_overseer_add = 200
        }
    }
	
	ai_resource_production = {
		minerals = 100
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_decompressor_district = yes
		}
	}

	# NO SUBTITLES, DISTRICT NAME IS LONG
}

###############################################################################################################

district_giga_frameworld_farming = {
	base_buildtime = @base_time
	icon = district_farming
	is_capped_by_modifier = no
	overlay_icon = GFX_district_food
	
	zone_slots = {
		slot_food
	}

	show_on_uncolonized = {
		uses_district_set = giga_frameworld
	}
	
	potential = {
		uses_district_set = giga_frameworld
	}

	prerequisites = {
		tech_industrial_farming
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @base_cost
		}
		upkeep = {
			energy = @base_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 200
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 300
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_housing_agrarian_idyll
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			planet_housing_add = 100
		}
	}

	inline_script = {
		script = jobs/farmers_add
		AMOUNT = @base_rural_district_jobs
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_tankbound_empire = yes }
        }
        modifier = {
            job_farmer_automated_workforce_mult = 1.0
            job_production_overseer_add = 100
        }
    }

	inline_script = {
		script = districts/district_triggered_name_farming
	}

	inline_script = {
		script = districts/district_triggered_flavor_desc_farming
	}
	
	ai_resource_production = {
		food = 1
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################
###############################################################################################################
#          UNITY
###############################################################################################################
###############################################################################################################

# normal empire unity

district_giga_frameworld_administrative = {
	base_buildtime = @city_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity
	
	zone_slots = {
		slot_giga_frameworld_unity
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_gestalt = no 
			giga_country_uses_priests = no
			# has_technology = "tech_colonial_bureaucracy"
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_gestalt = no
			giga_country_uses_priests = no
			# has_technology = "tech_colonial_bureaucracy"
		}
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	tech_colonial_bureaucracy
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	is_gestalt = no
	# 	giga_country_uses_priests = no
	# }
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_temple
		district_giga_frameworld_simulation
		district_giga_frameworld_synapse
		district_giga_frameworld_sanctuary
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}

	inline_script = {
		script = jobs/unity_jobs_add
		AMOUNT = @half_district_jobs
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_regular_empire = yes
                is_spiritualist = no
            }
        }
        job_bureaucrat_add = 200
    }


    ai_resource_production = {
		unity = 1
		trigger = {
			always = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_admin_name
	}
}

###############################################################################################################

# spiritualist unity

district_giga_frameworld_temple = {
	base_buildtime = @city_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity

	zone_slots = {
		slot_giga_frameworld_unity_priest
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_gestalt = no
			giga_country_uses_priests = yes
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_gestalt = no
			giga_country_uses_priests = yes
			# has_technology = "tech_holographic_rituals"
		}
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	"tech_holographic_rituals"
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	is_gestalt = no
	# 	giga_country_uses_priests = yes
	# }
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_administrative
		district_giga_frameworld_simulation
		district_giga_frameworld_synapse
		district_giga_frameworld_sanctuary
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}

	inline_script = {
		script = jobs/priests_add
		AMOUNT = @half_district_jobs
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_regular_empire = yes
                is_spiritualist = yes
            }
        }
        job_bureaucrat_add = 200
    }

	# might not be great to stack
	#triggered_planet_modifier = {
	#	spiritualist_attraction = 0.1
	#}

	ai_resource_production = {
		unity = 1
		trigger = {
			always = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_priest_name
	}
}

###############################################################################################################

# hive unity

district_giga_frameworld_synapse = {
	base_buildtime = @city_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity
	
	zone_slots = {
		slot_giga_frameworld_unity
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_hive_empire = yes 
			# has_technology = "tech_hive_cluster"
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_hive_empire = yes 
			# has_technology = "tech_hive_cluster"
		}
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	tech_hive_cluster
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	is_hive_empire = yes
	# 	not = { has_valid_civic = civic_machine_servitor }
	# }
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_simulation
		district_giga_frameworld_administrative
		district_giga_frameworld_temple
		district_giga_frameworld_sanctuary
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}


	inline_script = {
		script = jobs/unity_jobs_add
		AMOUNT = @half_district_jobs
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        job_coordinator_add = 200
    }

	# triggered_planet_modifier = {
	# 	potential = {
	# 		exists = owner
	# 		owner = {
	# 			has_edict = synaptic_reinforcement
	# 		}
	# 	}
	# 	job_maintenance_drone_add = 1
	# }
	
	ai_resource_production = {
		unity = 1
		trigger = {
			always = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_synapse_name
	}
}

###############################################################################################################

# machine unity

district_giga_frameworld_simulation = {
	base_buildtime = @city_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity
	
	zone_slots = {
		slot_giga_frameworld_unity
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_machine_empire = yes 
			NOT = { has_valid_civic = civic_machine_servitor }
			# has_technology = "tech_colonial_bureaucracy"
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_machine_empire = yes 
			NOT = { has_valid_civic = civic_machine_servitor }
			# has_technology = "tech_colonial_bureaucracy"
		}
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	tech_colonial_bureaucracy
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	is_machine_empire = yes
	# 	not = { has_valid_civic = civic_machine_servitor }
	# }
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_administrative
		district_giga_frameworld_temple
		district_giga_frameworld_synapse
		district_giga_frameworld_sanctuary
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}

	inline_script = {
		script = jobs/unity_jobs_add
		AMOUNT = @half_district_jobs
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        job_coordinator_add = 200
    }

	ai_resource_production = {
		unity = 1
		trigger = {
			always = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_coordinator_name
	}
}

###############################################################################################################

# servitor unity

district_giga_frameworld_sanctuary = {
	base_buildtime = @city_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity

	zone_slots = {
		slot_giga_frameworld_unity_servitor
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_machine_empire = yes 
			has_valid_civic = civic_machine_servitor
			# has_technology = "tech_paradise_dome"
		}
		not = { has_planet_flag = frameworld_advanced_sanctuary }
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_machine_empire = yes 
			has_valid_civic = civic_machine_servitor
			# has_technology = "tech_paradise_dome"
		}
		not = { has_planet_flag = frameworld_advanced_sanctuary }
		uses_district_set = giga_frameworld
	}

	allow = {
		exists = owner
		owner = {
			is_ai = no
		}
	}

	# prerequisites = {
	# 	tech_paradise_dome
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# 	has_valid_civic = civic_machine_servitor
	# }
	
	conversion_ratio = 0.5
	convert_to = {
		district_giga_frameworld_simulation
		district_giga_frameworld_synapse
		district_giga_frameworld_administrative
		district_giga_frameworld_temple
		
		district_giga_frameworld_sanctuary_advanced
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
		job_bio_trophy_add = 500
	}
	
	ai_resource_production = {
		trigger = {
			free_district_slots > 0
			has_unemployed_pop_of_category = bio_trophy
		}
		ai_unobtainium = 1000
	}

	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_servitor_name
	}
}

###############################################################################################################

# servitor unity advanced

district_giga_frameworld_sanctuary_advanced = {
	base_buildtime = @mega_time
	icon = district_arcology_administrative
	is_capped_by_modifier = no
	overlay_icon = GFX_district_unity
	
	zone_slots = {
		slot_giga_frameworld_unity_servitor
	}

	show_on_uncolonized = {
		exists = from
		from = { 
			is_machine_empire = yes 
			has_valid_civic = civic_machine_servitor
			has_technology = "tech_paradise_dome"
		}
		has_planet_flag = frameworld_advanced_sanctuary
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = { 
			is_machine_empire = yes 
			has_valid_civic = civic_machine_servitor
			has_technology = "tech_paradise_dome"
		}
		has_planet_flag = frameworld_advanced_sanctuary
		uses_district_set = giga_frameworld
	}

	allow = {
		exists = owner
		owner = {
			is_ai = no
		}
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_simulation
		district_giga_frameworld_synapse
		district_giga_frameworld_administrative
		district_giga_frameworld_temple
		
		district_giga_frameworld_sanctuary
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @advanced_cost
			exotic_gases = @advanced_rare_cost
		}
		upkeep = {
			energy = @advanced_upkeep
			exotic_gases = @advanced_rare_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
		job_bio_trophy_add = 2000
	}

	ai_resource_production = {
		unity = 4
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		trigger = {
			free_district_slots > 0
			has_unemployed_pop_of_category = bio_trophy
		}
		ai_unobtainium = 1000
	}

	ai_resource_production = {
		unity = 40
		physics_research = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	ai_resource_production = {
		unity = 40
		alloys = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	ai_resource_production = {
		unity = 40
		consumer_goods = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_servitor_name
	}
}

###############################################################################################################
###############################################################################################################
#          RESEARCH
###############################################################################################################
###############################################################################################################

district_giga_frameworld_science = {
	base_buildtime = @advanced_time
	icon = district_hab_science
	is_capped_by_modifier = no
	overlay_icon = GFX_district_research
	# gridbox = district_arcology_research
	# district_background = district_arcology_research
	
	zone_slots = {
		slot_giga_frameworld_research
	}

	show_on_uncolonized = {
		exists = from
		# from = {
		# 	has_technology = "tech_basic_science_lab_2"
		# }
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		# owner = {
		# 	has_technology = "tech_basic_science_lab_2"
		# }
		uses_district_set = giga_frameworld
	}

	# prerequisites = {
	# 	tech_basic_science_lab_2
	# }

	# show_tech_unlock_if = {
	# 	giga_has_frameworld_origin = yes
	# }
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}

		# nanite upgrade
		upkeep = {
			trigger = {
				frameworld_has_active_nanite_upgrade = yes
			}
			nanites = @advanced_rare_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	inline_script = {
		script = jobs/researchers_add
		AMOUNT = 30
	}

    # COMPUTING COMPLEX
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_regular_empire = yes
                NOT = {
                    has_country_flag = fallen_empire_1
                }
            }
        }
        modifier = {
            job_physicist_add = 60
            job_biologist_add = 60
            job_engineer_add = 60
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        job_calculator_physicist_add = 60
        job_calculator_biologist_add = 60
        job_calculator_engineer_add = 60
    }

	# nanite upgrade
    triggered_planet_modifier = {
        potential = {
            frameworld_has_active_nanite_upgrade = yes
            exists = owner
            owner = {
                is_regular_empire = yes
                NOT = {
                    has_country_flag = fallen_empire_1
                }
            }
        }
        modifier = {
            job_physicist_add = 10
            job_biologist_add = 10
            job_engineer_add = 10
        }
    }
    triggered_planet_modifier = {
        potential = {
            frameworld_has_active_nanite_upgrade = yes
            exists = owner
            owner = { is_machine_empire = yes }
        }
        job_calculator_physicist_add = 10
        job_calculator_biologist_add = 10
        job_calculator_engineer_add = 10
    }

	ai_resource_production = {
		physics_research = 16
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		society_research = 16
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		engineering_research = 16
		trigger = {
			always = yes
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_science = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_research_name
	}
}

###############################################################################################################
###############################################################################################################
#          REFINERY
###############################################################################################################
###############################################################################################################

district_giga_frameworld_refinery = {

	zone_slots = {
		slot_giga_frameworld_refinery
	}


    base_buildtime = @advanced_time
    icon = district_giga_refinery
    overlay_icon = GFX_giga_district_strategic_resources
    gridbox = district_industrial
    district_background = district_giga_frameworld_refinery
    is_capped_by_modifier = no

    planet_modifier = {
        planet_housing_add = 500
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @advanced_cost
        }

        # motes
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_volatile_motes }
            }
            energy = 3
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_volatile_motes }
                frameworld_has_active_nanite_upgrade = yes
            }
            energy = 2
            nanites= 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_volatile_motes }
                frameworld_has_active_nanite_upgrade = yes
            }
            volatile_motes = 3
        }

        # gases
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_exotic_gases }
            }
            energy = 3
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_exotic_gases }
                frameworld_has_active_nanite_upgrade = yes
            }
            energy = 2
            nanites= 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_exotic_gases }
                frameworld_has_active_nanite_upgrade = yes
            }
            exotic_gases = 3
        }


        # crystals
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_rare_crystals }
            }
            energy = 3
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_rare_crystals }
                frameworld_has_active_nanite_upgrade = yes
            }
            energy = 2
            nanites= 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = { has_technology = tech_rare_crystals }
                frameworld_has_active_nanite_upgrade = yes
            }
            rare_crystals = 3
        }
    }

    # CHEMIST
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_volatile_motes
                is_gestalt = no
            }
        }
        job_chemist_add = 30
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_volatile_motes
                is_gestalt = yes
            }
        }
        job_chemist_drone_add = 30
    }

    # GAS
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_exotic_gases
                is_gestalt = no
            }
        }
        job_gas_refiner_add = 30
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_exotic_gases
                is_gestalt = yes
            }
        }
        job_gas_refiner_drone_add = 30
    }

    # CRYSTAL
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_rare_crystals
                is_gestalt = no
            }
        }
        job_translucer_add = 30
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_rare_crystals
                is_gestalt = yes
            }
        }
        job_translucer_drone_add = 30
    }

	show_on_uncolonized = {
		exists = from
		from = {
			OR = {
				has_technology = "tech_volatile_motes"
				has_technology = "tech_exotic_gases"
				has_technology = "tech_rare_crystals"
			}
		}
		uses_district_set = giga_frameworld
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				has_technology = "tech_volatile_motes"
				has_technology = "tech_exotic_gases"
				has_technology = "tech_rare_crystals"
			}
		}
		uses_district_set = giga_frameworld
	}

	########## AI INFO

	ai_resource_production = {
		volatile_motes = 3
		trigger = {
			exists = owner
			owner = {
				has_technology = "tech_volatile_motes"
			}
		}
	}

	ai_resource_production = {
		exotic_gases = 3
		trigger = {
			exists = owner
			owner = {
				has_technology = "tech_exotic_gases"
			}
		}
	}

	ai_resource_production = {
		rare_crystals = 3
		trigger = {
			exists = owner
			owner = {
				has_technology = "tech_rare_crystals"
			}
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_refinery = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_refinery_name
	}
}

###############################################################################################################

district_giga_frameworld_refinery_motes = {
	inline_script = {
		script = districts/frameworld/giga_frameworld_refinery
		time = @advanced_time
		cost = @advanced_cost

		fake_motes = @yes
		fake_gases = @no
		fake_crystals = @no
	}
	
	show_on_uncolonized = {
		always = no
	}
	
	potential = {
		always = no
	}

	prerequisites = {
		tech_volatile_motes
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
}

###############################################################################################################

district_giga_frameworld_refinery_gases = {
	inline_script = {
		script = districts/frameworld/giga_frameworld_refinery
		time = @advanced_time
		cost = @advanced_cost

		fake_motes = @no
		fake_gases = @yes
		fake_crystals = @no
	}
	
	show_on_uncolonized = {
		always = no
	}
	
	potential = {
		always = no
	}

	prerequisites = {
		tech_exotic_gases
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
}

###############################################################################################################

district_giga_frameworld_refinery_crystals = {
	inline_script = {
		script = districts/frameworld/giga_frameworld_refinery
		time = @advanced_time
		cost = @advanced_cost

		fake_motes = @no
		fake_gases = @no
		fake_crystals = @yes
	}
	
	show_on_uncolonized = {
		always = no
	}
	
	potential = {
		always = no
	}

	prerequisites = {
		tech_rare_crystals
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
}

###############################################################################################################
###############################################################################################################
#          SPECIALIST
###############################################################################################################
###############################################################################################################

# anti-crime

district_giga_frameworld_anticrime = {
	base_buildtime = @advanced_time
	#icon = district_penrose_generator
	is_capped_by_modifier = no
	#overlay_icon = GFX_district_unity
	gridbox = district_arcology_leisure
	district_background = district_arcology_leisure

	zone_slots = {
		slot_giga_frameworld_anticrime
	}

	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = "tech_colonial_centralization"
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = "tech_colonial_centralization"
		}
		uses_district_set = giga_frameworld
	}

	prerequisites = {
		tech_colonial_centralization
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @advanced_cost
			volatile_motes = @advanced_rare_cost
		}
		upkeep = {
			energy = @advanced_upkeep
			volatile_motes = @advanced_rare_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_enforcer_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_patrol_drone_add = 100
		}
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_anticrime = yes
		}
	}

	inline_script = {
		script = districts/frameworld/name/giga_frameworld_anticrime_name
	}
}

###############################################################################################################

# amenities

district_giga_frameworld_amenities = {
	base_buildtime = @advanced_time
	icon = district_arcology_leisure
	district_background = district_resort_secondary
	overlay_icon = GFX_district_amenities
	is_capped_by_modifier = no
	
	zone_slots = {
		slot_giga_frameworld_amenities
	}

	show_on_uncolonized = {
		exists = from
		from = {
			is_gestalt = no
			NOT = { has_valid_civic = civic_dystopian_society }
			has_technology = tech_colonial_centralization
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			is_gestalt = no
			NOT = { has_valid_civic = civic_dystopian_society }
			has_technology = tech_colonial_centralization
		}
		uses_district_set = giga_frameworld
	}

	prerequisites = {
		tech_colonial_centralization
	}

	conversion_ratio = 1.0
	convert_to = {
		district_giga_frameworld_amenities_dystopian
		#district_giga_frameworld_amenities_gestalt
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
		is_gestalt = no
		NOT = { has_valid_civic = civic_dystopian_society }
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @city_cost
			#exotic_gases = @advanced_rare_cost
		}
		upkeep = {
			energy = @city_upkeep
			#exotic_gases = @advanced_rare_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
		}
		modifier = {
			job_entertainer_add = 100
		}
	}

	triggered_name = {
		trigger = {
			num_zones = {
				type = zone_giga_frameworld_amenities
				value > 0
			}
		}
		text = zone_resort_entertainment
	}
	triggered_flavor_desc = {
		trigger = {
			num_zones = {
				type = zone_giga_frameworld_amenities
				value > 0
			}
		}
		text = zone_resort_entertainment_desc
	}
}

###############################################################################################################

# dystopian amenities

district_giga_frameworld_amenities_dystopian = {
	base_buildtime = @advanced_time
	icon = district_arcology_leisure
	overlay_icon = GFX_district_amenities
	is_capped_by_modifier = yes

	zone_slots = {
		slot_giga_frameworld_amenities
	}
	
	show_on_uncolonized = {
		exists = from
		from = {
			is_gestalt = no
			has_valid_civic = civic_dystopian_society
			has_technology = tech_colonial_centralization
		}
		uses_district_set = giga_frameworld
	}

	potential = {
		exists = owner
		owner = {
			is_gestalt = no
			has_valid_civic = civic_dystopian_society
			has_technology = tech_colonial_centralization
		}
		uses_district_set = giga_frameworld
	}

	prerequisites = {
		tech_colonial_centralization
	}

	conversion_ratio = 1.0
	convert_to = {
		district_giga_frameworld_amenities
		#district_giga_frameworld_amenities_gestalt
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
		is_gestalt = no
		has_valid_civic = civic_dystopian_society
	}

	resources = {
		category = planet_districts
		cost = {
			minerals = @[ advanced_cost * 2 ]
			rare_crystals = @advanced_rare_cost
			exotic_gases = @advanced_rare_cost
		}
		upkeep = {
			energy = @[ advanced_upkeep * 2 ]
			rare_crystals = @advanced_rare_upkeep
			exotic_gases = @advanced_rare_upkeep
		}
	}

	triggered_desc = {
		trigger = { always = yes }
		text = district_giga_frameworld_amenities_dystopian_limit
	}

	planet_modifier = {
		planet_housing_add = 500
		planet_amenities_add = 50000
	}

	triggered_planet_modifier = {
        potential = {
            owner = {
                is_gestalt = no
            }
        }
        job_politician_add = 50
    }
}

###############################################################################################################

# gestalt amenities
# DISABLED SINCE GESTALTS USE UNEMPLOYED AS AMENTITES

# district_giga_frameworld_amenities_gestalt = {
# 	base_buildtime = @advanced_time
# 	icon = district_arcology_leisure
# 	is_capped_by_modifier = no
	
# 	show_on_uncolonized = {
# 		exists = from
# 		from = {
# 			is_gestalt = yes
# 			has_technology = "tech_unity_of_purpose"
# 		}
# 		uses_district_set = giga_frameworld
# 	}
	
# 	potential = {
# 		exists = owner
# 		owner = {
# 			is_gestalt = yes
# 			has_technology = "tech_unity_of_purpose"
# 		}
# 		uses_district_set = giga_frameworld
# 	}

# 	allow = {
# 		hidden_trigger = {
# 			exists = owner
# 			or = {
# 				owner = {
# 					is_ai = no
# 				}

# 				frameworld_needs_more_maintenance_drones = yes
# 			}
# 		}
# 	}

# 	prerequisites = {
# 		tech_unity_of_purpose
# 	}

# 	conversion_ratio = 1.0
# 	convert_to = {
# 		district_giga_frameworld_amenities_dystopian
# 		district_giga_frameworld_amenities
# 	}

# 	show_tech_unlock_if = {
# 		giga_has_frameworld_origin = yes
# 		is_gestalt = yes
# 	}
	
# 	resources = {
# 		category = planet_districts
# 		cost = {
# 			minerals = @advanced_cost
# 			rare_crystals = @advanced_rare_cost
# 		}
# 		upkeep = {
# 			energy = @advanced_upkeep
# 			rare_crystals = @advanced_rare_upkeep
# 		}
# 	}
	
# 	planet_modifier = {
# 		planet_housing_add = 200
# 		job_maintenance_drone_add = 8
# 	}

# 	triggered_planet_modifier = {
# 		potential = {
# 			exists = owner
# 			owner = { has_technology = tech_housing_2 }
# 		}
# 		modifier = {
# 			job_maintenance_drone_add = 2
# 		}
# 	}

# 	triggered_planet_modifier = {
# 		potential = {
# 			has_planet_flag = frameworld_advanced_city
# 		}
# 		modifier = {
# 			job_frame_maintenance_overseer_add = 2
# 			job_maintenance_drone_add = -2
# 		}
# 	}
	
# 	triggered_desc = {
# 		text = job_maintenance_drone_effect_desc
# 	}

# 	triggered_desc = {
# 		trigger = {
# 			has_deposit = d_frameworld_advanced_nexus
# 		}
# 		text = job_frame_maintenance_overseer_effect_desc
# 	}
# }

###############################################################################################################
###############################################################################################################
#          EHOF RESOURCES
###############################################################################################################
###############################################################################################################

district_giga_frameworld_sentient_metal = {
	base_buildtime = @advanced_time
	icon = district_giga_sentient_metal
	is_capped_by_modifier = no
	overlay_icon = GFX_giga_district_sentient_metal
	district_background = district_giga_frameworld_sentient_metal
	gridbox = district_giga_birch_ktisma_sentient_metal
	
	zone_slots = {
		slot_giga_frameworld_ehof_sentient
	}

	prerequisites = {
		tech_ehof_sentient_tier_3
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = tech_ehof_sentient_tier_3
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = tech_ehof_sentient_tier_3
		}
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @b4_minerals
		}
		upkeep = {
			energy = @b4_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 300
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		modifier = {
			job_ehof_cultivator_add = @b2_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_ehof_cultivation_drone_add = @b2_jobs
		}
	}
	
	ai_resource_production = {
		giga_sr_sentient_metal = 8
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################

district_giga_frameworld_negative_mass = {
	base_buildtime = @advanced_time
	icon = district_giga_negative_mass
	is_capped_by_modifier = no
	overlay_icon = GFX_giga_district_negative_mass
	district_background = district_giga_frameworld_negative_mass
	gridbox = district_giga_birch_orykta_negative_mass
	
	zone_slots = {
		slot_giga_frameworld_ehof_negative
	}

	prerequisites = {
		tech_nm_utilization_2
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = tech_nm_utilization_2
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = tech_nm_utilization_2
		}
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b3_rare_cost
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 300
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		modifier = {
			job_ehof_energy_converter_add = @b2_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_ehof_energy_converter_drone_add = @b2_jobs
		}
	}
	
	ai_resource_production = {
		giga_sr_negative_mass = 4
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################
###############################################################################################################
#          MEGA BUILD
###############################################################################################################
###############################################################################################################

district_giga_frameworld_supertensiles = {
	base_buildtime = @b2_time
	icon = district_giga_supertensiles
	overlay_icon = GFX_giga_district_supertensiles
	district_background = district_giga_frameworld_supertensiles
	is_capped_by_modifier = no
	
	zone_slots = {
		slot_giga_frameworld_supertensiles
	}

	prerequisites = {
		giga_tech_amb_supertensiles
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	show_on_uncolonized = {
		has_global_flag = @giga_amb_flag
		exists = from
		from = {
			has_technology = giga_tech_amb_supertensiles
		}
		uses_district_set = giga_frameworld
	}
	
	potential = {
		has_global_flag = @giga_amb_flag
		exists = owner
		owner = {
			has_technology = giga_tech_amb_supertensiles
		}
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts_industrial
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_giga_megaengineer_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_giga_megaengineer_drone_add = 100
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_fallen_empire_spiritualist = yes
			}
		}
		modifier = {
			job_giga_amb_fe_acolyte_foundry_add = 100
		}
	}
	
	ai_resource_production = {
		giga_sr_amb_megaconstruction = 2
		trigger = {
			always = yes
		}
	}
}

###############################################################################################################
###############################################################################################################
#          MILITARY
###############################################################################################################
###############################################################################################################

# fortress

district_giga_frameworld_fortress = {
	base_buildtime = @advanced_time
	icon = district_arcology_fortress
	overlay_icon = GFX_district_fortress
	#icon = district_maginot_world_bunkers
	is_capped_by_modifier = no
	
	zone_slots = {
		slot_giga_frameworld_fortress
	}

	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = "tech_global_defense_grid"
		}
		is_giga_maginot_frameworld = no
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = "tech_global_defense_grid"
		}
		is_giga_maginot_frameworld = no
		uses_district_set = giga_frameworld
	}

	prerequisites = {
		tech_global_defense_grid
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @city_cost
		}
		upkeep = {
			energy = @city_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}

	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_fortress_bunker
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = 100
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = 100
		}
	}
	
	# triggered_desc = {
	# 	trigger = { 
	# 		exists = owner 
	# 		is_giga_maginot_frameworld = yes
	# 	}
	# 	text = job_maginot_planetary_bunker_effect_desc
	# }

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_fortress = yes
		}
	}
}

district_giga_frameworld_fortress_bunker = {
	base_buildtime = @advanced_time
	#overlay_icon = GFX_district_fortress
	icon = district_maginot_world_bunkers
	is_capped_by_modifier = no
	district_background = district_arcology_fortress
	gridbox = district_arcology_fortress
	
	zone_slots = {
		slot_giga_frameworld_fortress_bunker
	}

	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = "tech_global_defense_grid"
		}
		is_giga_maginot_frameworld = yes
		uses_district_set = giga_frameworld
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = "tech_global_defense_grid"
		}
		is_giga_maginot_frameworld = yes
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @maginot_district_cost_minerals
			alloys = @maginot_district_cost_alloys_medium
			volatile_motes = @maginot_district_cost_sr
		}
		upkeep = {
			energy = @maginot_district_upkeep_energy_medium
			volatile_motes = @maginot_district_upkeep_sr
		}
	}
	
	planet_modifier = {
		planet_housing_add = 500
	}
	
	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_fortress
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = 400
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = 400
		}
	}
	
	triggered_desc = {
		trigger = { 
			exists = owner 
			is_giga_maginot_frameworld = yes
		}
		text = job_maginot_planetary_bunker_effect_desc
	}

	on_built = {
		maginot_check_upgrade_points = yes
	}

	ai_resource_production = {
		ai_unobtainium = 1000
		trigger = {
			frameworld_want_fortress = yes
		}
	}
}


###############################################################################################################

# maginot shield district

district_giga_frameworld_maginot_shield_generators = {
	base_buildtime = @mega_time
	icon = district_maginot_world_shield_generators
	gridbox = district_arcology_administrative
	district_background = district_arcology_research_physics

	zone_slots = {
		slot_maginot_shield_generators
	}

	show_on_uncolonized = {
		has_planet_flag = frameworld_maginot
		uses_district_set = giga_frameworld
	}
	
	potential = {
		has_planet_flag = frameworld_maginot
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @maginot_district_cost_minerals
			alloys = @maginot_district_cost_alloys_medium
			exotic_gases = @maginot_district_cost_sr
		}
		upkeep = {
			energy = @maginot_district_upkeep_energy_shields
			exotic_gases = @maginot_district_upkeep_sr
		}
	}	

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_maginot_shield_generator_operator_add = @maginot_special_jobs_add
		}
	}	
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_maginot_shield_generator_operator_gestalt_add = @maginot_special_jobs_add
		}
	}

	planet_modifier = {
		planet_housing_add = 100
	}

	# triggered_desc = {
	# 	trigger = {
	# 		exists = owner
	# 		owner = {
	# 			is_gestalt = no
	# 		}
	# 	}
	# 	text = job_maginot_shield_generator_operator_effect_desc
	# }

	# triggered_desc = {
	# 	trigger = {
	# 		exists = owner
	# 		owner = { is_gestalt = yes }
	# 	}
	# 	text = job_maginot_shield_generator_operator_gestalt_effect_desc
	# }

	# triggered_desc = {
	# 	trigger = { exists = owner }
	# 	text = job_maginot_planetary_shield_effect_desc
	# }

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.05 # yes these are spammable to 100% and beyond, intentional
		# stuff on the planet is protected by shields from damage
		army_collateral_damage_mult = -1.00
	}

	triggered_desc = {
		text = district_giga_frameworld_maginot_shield_generators_cap
	}

	on_built = {
		maginot_check_upgrade_points = yes
	}

	#on_queued = { giga_frameworld_start_maginot_shield = yes }
	#on_unqueued = { giga_frameworld_stop_maginot_shield = yes }
	#on_built = { giga_frameworld_stop_maginot_shield = yes }
	#on_destroy = { giga_frameworld_update_maginot_deposits = yes }
}

###############################################################################################################

# maginot gun district

district_giga_frameworld_maginot_planetary_cannons = {
	base_buildtime = @mega_time
	icon = district_maginot_world_planetary_cannons
	district_background = district_arcology_administrative

	zone_slots = {
		slot_maginot_orbital_defense_grid
	}

	show_on_uncolonized = {
		has_planet_flag = frameworld_maginot
		uses_district_set = giga_frameworld
	}
	
	potential = {
		has_planet_flag = frameworld_maginot
		uses_district_set = giga_frameworld
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @maginot_district_cost_minerals
			alloys = @maginot_district_cost_alloys_expensive
		}
		upkeep = {
			energy = @maginot_district_upkeep_energy_medium
			alloys = @maginot_district_upkeep_alloys
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }					
		}
		modifier = {
			job_maginot_planetary_cannon_operator_add = @maginot_special_jobs_add
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }					
		}
		modifier = {
			job_maginot_planetary_cannon_operator_gestalt_add = @maginot_special_jobs_add
		}
	}

	planet_modifier = {
		planet_housing_add = 100
	}

	# triggered_desc = {
	# 	trigger = {
	# 		exists = owner
	# 		owner = {
	# 			is_gestalt = no
	# 		}
	# 	}
	# 	text = job_maginot_planetary_cannon_operator_effect_desc
	# }

	# triggered_desc = {
	# 	trigger = {
	# 		exists = owner
	# 		owner = { is_gestalt = yes }
	# 	}
	# 	text = job_maginot_planetary_cannon_operator_gestalt_effect_desc
	# }

	# triggered_desc = {
	# 	trigger = { exists = owner }
	# 	text = job_maginot_planetary_artillery_effect_desc
	# }

	triggered_desc = {
		text = district_giga_frameworld_maginot_planetary_cannons_cap
	}

	on_built = {
		maginot_check_upgrade_points = yes
	}
	#on_queued = { giga_frameworld_start_maginot_gun = yes }
	#on_unqueued = {	giga_frameworld_stop_maginot_gun = yes }
	#on_built = { giga_frameworld_stop_maginot_gun = yes }
	#on_destroy = { giga_frameworld_update_maginot_deposits = yes }
}

